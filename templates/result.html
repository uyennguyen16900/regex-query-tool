{% extends 'base.html' %}

{% block content %}
  <p>{{ matches }} matches</p>

  <!-- scoping issue - if you set 'i' outside the loop, you can't modify it inside the loop. -->
  {% set i = namespace(a=0) %}
  {% for word in test_str -%}
    {% if loop.index0 >= indices[i.a][0] and loop.index0 <= indices[i.a][1] %}
      <div style="background-color:blue">
        {{ word }}
      </div>
    {% elif loop.index0 == indices[i.a][1] + 1 %}
      {% set i.a = i.a + 1 %}
    {% else %}
      {{ word }}
    {% endif %}
  {%- endfor %}
{% endblock %}
